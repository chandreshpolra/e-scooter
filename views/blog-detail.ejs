<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <link rel="icon" type="image/x-icon" href="/images/favicon.ico">
  <title>
    <%= title %>
  </title>

  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <meta name="author" content="E-Scooter Blog" />
  <meta name="robots" content="index,follow,max-image-preview:large" />

  <meta name="title" content="<%= title %>">
  <meta name="description" content="<%= metaDescription %>">

  <link rel="canonical" href="<%= canonicalUrl %>" />

  <!-- Open Graph Meta Tags -->
  <meta property="og:type" content="article">
  <meta property="og:title" content="<%= ogTitle %>">
  <meta property="og:description" content="<%= ogDescription %>">
  <meta property="og:image" content="<%= ogImage %>">
  <meta property="og:url" content="<%= ogUrl %>">
  <meta property="og:site_name" content="<%= ogTitle %>" />

  <!-- Twitter Card Meta Tags -->
  <meta name="twitter:title" content="<%= twitterTitle %>">
  <meta name="twitter:description" content="<%= twitterDescription %>">
  <meta name="twitter:image" content="<%= twitterImage %>">

  <link rel="stylesheet" href="/css/style.css" />
  <link href="/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="/css/all.min.css" crossorigin="anonymous" />

  <!-- Google Fonts -->
  <link rel="stylesheet" href="/css/fonts.css" />

  <script type="application/ld+json">
          {
            "@context": "https://schema.org",
            "@type": "BlogPosting",
            "headline": "<%= blog.metaTitle %>",
            "description": "<%= blog.metaDescription %>",
            "image": [
              "https://e-scooter.blog<%= blog.image %>",
              "https://e-scooter.blog<%= blog.image2 %>"
            ],
            "datePublished": "<%= new Date(blog.publishedDate).toISOString().split('T')[0] %>",
            "dateModified": "<%= blog.updatedAt ? new Date(blog.updatedAt).toISOString().split('T')[0] : new Date(blog.publishedDate).toISOString().split('T')[0] %>",
            "author": {
              "@type": "Person",
              "name": "<%= blog.authorName %>"
            },
            "publisher": {
              "@type": "Organization",
              "name": "E-Scooter Blog",
              "logo": {
                "@type": "ImageObject",
                "url": "https://e-scooter.blog/uploads/logo.jpg"
              }
            },
            "mainEntityOfPage": {
              "@type": "WebPage",
              "@id": "<%= blog.canonicalUrl || `https://e-scooter.blog/blogs/${blog.slug}` %>"
            }
          }
        </script>

  <script type="application/ld+json">
            {
              "@context": "https://schema.org",
              "@type": "Person",
              "name": "<%= blog.authorName %>",
              "jobTitle": "<%= blog.authorTitle %>",
              "description": "<%= blog.authorBio %>"
            }
        </script>

  <% if (blog.faqSchemaJson) { %>
    <script type="application/ld+json">
            <%- JSON.stringify(JSON.parse(blog.faqSchemaJson), null, 2) %>
          </script>
    <% } else { %>
      <script type="application/ld+json">
            <%- JSON.stringify({
              "@context": "https://schema.org",
              "@type": "FAQPage",
              "mainEntity": [
                {
                  "@type": "Question",
                  "name": `What is ${blog.title}?`,
                  "acceptedAnswer": {
                    "@type": "Answer",
                    "text": blog.excerpt.replace(/(<([^>]+)>)/gi, '')
                  }
                },
                {
                  "@type": "Question",
                  "name": "Who wrote this article?",
                  "acceptedAnswer": {
                    "@type": "Answer",
                    "text": `${blog.authorName}, ${blog.authorTitle}`
                  }
                }
              ]
            }, null, 2) %>
          </script>
      <% } %>



        <meta name="google-site-verification" content="_ZuuY2jNs-2lytt1iVDMVNSUgj8Jsw8MRkke9Kph0p4" />

        <script async src="https://www.googletagmanager.com/gtag/js?id=G-BD6TJVQC24"></script>
        <script>
          window.dataLayer = window.dataLayer || [];
          function gtag() { dataLayer.push(arguments); }
          gtag('js', new Date());
          gtag('config', 'G-BD6TJVQC24');
        </script>

        <meta name="yandex-verification" content="44f08ebc53b9aa57" />
</head>

<body>

  <!-- Header -->
  <header class="header">
    <div class="container">
      <div class="header-content">
        <div class="logo mb-2">
          <a href="/"><img src="../uploads/logo.jpg" alt="E-Scooter Logo" width="250" height="50"
              fetchpriority="high"></a>
        </div>
        <p class="header-subtitle">Your Trusted Source for Electric Scooter and EV News</p>
      </div>
    </div>
  </header>

  <!-- Blog Detail Section -->
  <section class="common-forms">
    <div class="container">
      <div class="row">
        <div class="col-12 col-lg-9">
          <div class="details">
            <div class="details-content">
              <h1>
                <%= blog.title %>
              </h1>
              <p class="subtitle">
                Posted On : <% let dateToUse=null; if (blog.publishedDate && blog.publishedDate !=="undefined" &&
                  blog.publishedDate !=="null" ) { dateToUse=blog.publishedDate; } else if (blog.createdAt) {
                  dateToUse=blog.createdAt; } if (dateToUse) { %>
                  <%= new Date(dateToUse).toLocaleDateString("en-GB", { day: "2-digit" , month: "long" , year: "numeric"
                    }) %>
                    <% } else { %>
                      Recently Added
                      <% } %>


              </p>

              <% function getImageName(imagePath) { if (!imagePath) return '' ; let name=imagePath.split('/').pop();
                name=name.replace(/\.[^/.]+$/, "" ); name=name.replace(/[-_]+/g, ' ' ); name=name.replace(/\b\w/g, c=>
                c.toUpperCase());
                return name + ' Blog Image';
                }
                %>

                <!-- Main Blog Image -->
                <img src="<%= blog.image %>"
                  srcset="<%= blog.image %> 382w, <%= blog.image %> 764w, <%= blog.image %> 1200w"
                  sizes="(max-width: 600px) 382px, (max-width: 1024px) 764px, 1200px"
                  alt="<%= getImageName(blog.image) %>" class="details-image" loading="lazy">

                <% if (blog.image2) { %>
                  <img src="<%= blog.image2 %>"
                    srcset="<%= blog.image2 %> 382w, <%= blog.image2 %> 764w, <%= blog.image2 %> 1200w"
                    sizes="(max-width: 600px) 382px, (max-width: 1024px) 764px, 1200px"
                    alt="<%= getImageName(blog.image2) %>" class="details-image" loading="lazy">
                  <% } %>

                    <div class="details-description">
                      <div class="details-description-text">
                        <%- blog.content %>
                      </div>
                    </div>

                    <% if (blog.image3) { %>
                      <img src="<%= blog.image3 %>"
                        srcset="<%= blog.image3 %> 382w, <%= blog.image3 %> 764w, <%= blog.image3 %> 1200w"
                        sizes="(max-width: 600px) 382px, (max-width: 1024px) 764px, 1200px"
                        alt="<%= getImageName(blog.image3) %>" class="details-image" loading="lazy">
                      <% } %>



            </div>

            <!-- Enhanced Author Section -->
            <div class="author-section">
              <div class="author-info">
                <div class="author-avatar">
                  <img id="authorImage" src="../uploads/default-user.jpg" alt="Author Image"
                    style="width:50px; height:50px; border-radius:50%; object-fit:cover;">
                </div>
                <div class="author-details">
                  <h4 class="author-name">
                    <%= blog.authorName || 'E-Scooter Blog Team' %>
                  </h4>
                  <p class="author-title">
                    <%= blog.authorTitle || 'EV Specialist' %>
                  </p>
                  <p class="author-bio">
                    <%= blog.authorBio || 'Expert in electric vehicles and sustainable mobility solutions.' %>
                  </p>
                </div>
              </div>
            </div>

          </div>
        </div>
        <div class="col-md-12 col-lg-3">
          <div class="blog-grid">
            <% relatedBlogs.forEach(function(relatedBlog) { %>
              <a href="/blogs/<%= relatedBlog.slug %>" class="blog-card">
                <div class="blog-image">
                  <img src="<%= relatedBlog.image %>" alt="<%= relatedBlog.title %>" width="400" height="100"
                    fetchpriority="high" decoding="async">
                </div>
                <div class="blog-content">
                  <div class="tag">
                    <%= relatedBlog.category %>
                  </div>
                  <h3 class="blog-title">
                    <%= relatedBlog.title %>
                  </h3>
                  <div class="date">
                    Posted on : <% let dateToUse=null; if (relatedBlog.publishedDate && relatedBlog.publishedDate
                      !=="undefined" && relatedBlog.publishedDate !=="null" ) { dateToUse=relatedBlog.publishedDate; }
                      else if (relatedBlog.createdAt) { dateToUse=relatedBlog.createdAt; } if (dateToUse) { %>
                      <%= new Date(dateToUse).toLocaleDateString("en-GB", { day: "2-digit" , month: "long" ,
                        year: "numeric" }) %>
                        <% } else { %>
                          Recently Added
                          <% } %>

                  </div>
                </div>
              </a>
              <% }); %>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="footer">
    <div class="container">
      <div class="footer-content">
        <div class="footer-brand">
          <div class="footer-logo">
            <a href="/"><img src="../uploads/logo.jpg" alt="E-Scooter Logo"></a>
          </div>
          <p>Your Trusted Source for Electric Scooter and EV News</p>
        </div>
        <div class="footer-bottom">
          <div class="footer-links">
            <span>© 2025 <b>e-scooter.blog</b> |</span>
            <a href="/about">About</a> |
            <a href="/contact">Contact</a> |
            <a href="/privacy-policy">Privacy Policy</a> |
            <a href="/terms-of-use">Terms of Use</a> |
            <a href="/sitemap">Sitemap</a>
          </div>
          <div class="footer-social">
            <a href="https://medium.com/@escooterblognews" target="_blank" rel="noopener noreferrer"><i
                class="fa-brands fa-medium"></i></a>
            <a href="https://x.com/escooter01" target="_blank" rel="noopener noreferrer"><i
                class="fab fa-twitter"></i></a>
            <a href="https://www.youtube.com/@e-scooter-01" target="_blank" rel="noopener noreferrer"><i
                class="fa-brands fa-youtube"></i></a>
            <a href="https://www.quora.com/profile/E-Scooter-4" target="_blank" rel="noopener noreferrer"><i
                class="fab fa-quora"></i></a>
          </div>
        </div>
      </div>
    </div>
  </footer>
  <script src="/js/bootstrap.bundle.min.js"></script>
  <script src="/js/chart.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const canvas = document.getElementById('salesChart');

      if (!canvas) return; // Agar canvas nahi mila to kuch mat karo

      const ctx = canvas.getContext('2d');

      new Chart(ctx, {
        type: 'bar',
        data: {
          labels: ['FY2023', 'FY2024', 'FY2025'],
          datasets: [{
            label: 'Bajaj Chetak Sales',
            data: [71941, 193439, 260000],
            backgroundColor: 'rgba(62, 177, 122, 0.8)',
            borderColor: 'rgba(62, 177, 122, 1)',
            borderWidth: 1
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            legend: {
              display: true,
              position: 'top'
            }
          },
          scales: {
            y: {
              beginAtZero: true,
              ticks: {
                callback: function (value) {
                  return value.toLocaleString();
                }
              }
            }
          }
        }
      });
    });
  </script>


  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const authorName = "<%= blog.authorName %>";
      const csvFileName = "<%= typeof csvFileName !== 'undefined' ? csvFileName : 'authors.csv' %>"; // Default authors.csv

      fetch("../data/" + csvFileName)
        .then(response => response.text())
        .then(data => {
          const rows = data.split("\n").map(row => row.split(","));
          rows.forEach(row => {
            const [name, imagePath] = row;
            if (name.trim() === authorName.trim()) {
              document.getElementById("authorImage").src = "../uploads/" + imagePath.trim();
            }
          });
        })
        .catch(err => console.error("CSV Load Error:", err));
    });
  </script>
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const authorName = "<%= blog.authorName %>";  // CSV se aaya hua authorName

      // AuthorName ko filename ke format me convert karte hain
      const formattedName = authorName.trim().replace(/\s+/g, "-"); // e.g. "Harsh Patel" -> "Harsh-Patel"
      const imagePath = "../uploads/" + formattedName + ".jpg";

      // Pehle image try karo, agar mile to set karo, warna default rakho
      fetch(imagePath, { method: "HEAD" })
        .then(response => {
          if (response.ok) {
            document.getElementById("authorImage").src = imagePath;
          } else {
            document.getElementById("authorImage").src = "../uploads/default.jpg";
          }
        })
        .catch(() => {
          document.getElementById("authorImage").src = "../uploads/default.jpg";
        });
    });
  </script>




</body>

</html>